(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{526:function(a,t,s){"use strict";s.r(t);var e=s(18),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"编译topio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译topio"}},[a._v("#")]),a._v(" 编译TOPIO")]),a._v(" "),s("p",[a._v("本章指导您在Linux/unix环境中编译TOPIO。")]),a._v(" "),s("p",[a._v("如果您已经拥有一个可供执行的TOPIO程序包，您可以跳过本章。")]),a._v(" "),s("h2",{attrs:{id:"应用开发环境依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应用开发环境依赖"}},[a._v("#")]),a._v(" 应用开发环境依赖")]),a._v(" "),s("p",[a._v("编译前，需要在您的环境中安装依赖软件：")]),a._v(" "),s("p",[a._v("GCC（GNU Compiler Collection，GNU编译器套件）、CMake、libreadline.so。")]),a._v(" "),s("h3",{attrs:{id:"依赖软件版本要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#依赖软件版本要求"}},[a._v("#")]),a._v(" 依赖软件版本要求")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("软件名称")]),a._v(" "),s("th",[a._v("版本要求")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("GCC")]),a._v(" "),s("td",[a._v("4.8.5")])]),a._v(" "),s("tr",[s("td",[a._v("CMake")]),a._v(" "),s("td",[a._v("3.0.0及以上")])]),a._v(" "),s("tr",[s("td",[a._v("libreadline.so")]),a._v(" "),s("td",[a._v("-")])])])]),a._v(" "),s("h3",{attrs:{id:"安装依赖软件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖软件"}},[a._v("#")]),a._v(" 安装依赖软件")]),a._v(" "),s("p",[s("strong",[a._v("安装GCC")])]),a._v(" "),s("p",[a._v("请参见GCC官方安装指南。")]),a._v(" "),s("p",[s("strong",[a._v("安装CMake")])]),a._v(" "),s("p",[a._v("执行如下命令安装CMake。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo yum install  cmake3.x86_64\n")])])]),s("p",[s("strong",[a._v("安装libreadline.so")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo yum install readline-devel.x86_64\n")])])]),s("h2",{attrs:{id:"编译和安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译和安装"}},[a._v("#")]),a._v(" 编译和安装")]),a._v(" "),s("h3",{attrs:{id:"使用cmake"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用cmake"}},[a._v("#")]),a._v(" 使用CMake")]),a._v(" "),s("h4",{attrs:{id:"编译、安装topio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译、安装topio"}},[a._v("#")]),a._v(" 编译、安装TOPIO")]),a._v(" "),s("p",[a._v("使用CMake，执行如下命令编译、安装TOPIO。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir cbuild\ncd cbuild\ncmake3 .. -DXENABLE_TESTS=OFF -DXENABLE_CODE_COVERAGE=OFF \nmake -j4\nsudo make install\n")])])]),s("p",[a._v("说明：")]),a._v(" "),s("blockquote",[s("p",[a._v("此处TOPIO的安装位置为："),s("code",[a._v("/user/bin/topio")]),a._v("。")])]),a._v(" "),s("h4",{attrs:{id:"更多编译参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更多编译参数"}},[a._v("#")]),a._v(" 更多编译参数")]),a._v(" "),s("ul",[s("li",[a._v("编译release版本：")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-DCMAKE_BUILD_TYPE=Release\n")])])]),s("ul",[s("li",[a._v("收集重要运行指标，例如吞吐量：")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-DBUILD_METRICS=ON\n")])])]),s("ul",[s("li",[a._v("开启edge节点交易限流：")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-DXDISABLE_RATELIMIT=ON\n")])])]),s("h4",{attrs:{id:"启动topio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动topio"}},[a._v("#")]),a._v(" 启动TOPIO")]),a._v(" "),s("p",[a._v("启动TOPIO前，请先执行如下命令：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("ldconfig\n")])])]),s("p",[a._v("启动TOPIO具体请参见"),s("RouterLink",{attrs:{to:"/zh/Tools/TOPIO/docs-cn/Tools/TOPIO/StartTOPIO.html"}},[a._v("启动TOPIO")]),a._v("。")],1),a._v(" "),s("h3",{attrs:{id:"使用shell-script"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用shell-script"}},[a._v("#")]),a._v(" 使用shell-script")]),a._v(" "),s("h4",{attrs:{id:"编译topio-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译topio-2"}},[a._v("#")]),a._v(" 编译TOPIO")]),a._v(" "),s("p",[a._v("执行如下命令编译TOPIO：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sh build.sh\n")])])]),s("p",[a._v("更多编译参数请参见"),s("a",{attrs:{href:"#%E6%9B%B4%E5%A4%9A%E7%BC%96%E8%AF%91%E5%8F%82%E6%95%B0"}},[a._v("更多编译参数")]),a._v("。")]),a._v(" "),s("h4",{attrs:{id:"安装topio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装topio"}},[a._v("#")]),a._v(" 安装TOPIO")]),a._v(" "),s("p",[a._v("执行如下命令安装TOPIO：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sh build.sh install\n")])])]),s("h4",{attrs:{id:"启动topio-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动topio-2"}},[a._v("#")]),a._v(" 启动TOPIO")]),a._v(" "),s("p",[a._v("启动TOPIO前，请先执行如下命令：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("ldconfig\n")])])]),s("p",[a._v("启动TOPIO请参见"),s("RouterLink",{attrs:{to:"/zh/Tools/TOPIO/docs-cn/Tools/TOPIO/StartTOPIO.html"}},[a._v("启动TOPIO")]),a._v("。")],1),a._v(" "),s("h2",{attrs:{id:"打包应用程序包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包应用程序包"}},[a._v("#")]),a._v(" 打包应用程序包")]),a._v(" "),s("h3",{attrs:{id:"打包应用程序包-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包应用程序包-2"}},[a._v("#")]),a._v(" 打包应用程序包")]),a._v(" "),s("p",[a._v("如果您想打包topio和复制到另一台机器，执行如下命令：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# for topio-0.0.0.0-debug.tar.gz\nsh pack.sh\n\n# for topio-0.0.0.0-release.tar.gz\nsh pack.sh release\n")])])]),s("h3",{attrs:{id:"安装topio-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装topio-2"}},[a._v("#")]),a._v(" 安装TOPIO")]),a._v(" "),s("p",[a._v("执行如下命令解压并安装TOPIO，具体请参见"),s("RouterLink",{attrs:{to:"/zh/Tools/TOPIO/docs-cn/Tools/TOPIO/InstallTOPIO.html"}},[a._v("安装TOPIO")]),a._v("。")],1),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tar -zxvf topio-0.0.0.0-release.tar.gz\ncd topio-0.0.0.0-release\nsh install.sh\n")])])]),s("h3",{attrs:{id:"启动topio-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动topio-3"}},[a._v("#")]),a._v(" 启动TOPIO")]),a._v(" "),s("p",[a._v("启动TOPIO请参见"),s("RouterLink",{attrs:{to:"/zh/Tools/TOPIO/docs-cn/Tools/TOPIO/StartTOPIO.html"}},[a._v("启动TOPIO")]),a._v("。")],1)])}),[],!1,null,null,null);t.default=r.exports}}]);